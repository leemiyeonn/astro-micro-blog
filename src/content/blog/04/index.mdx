---
title: "π—‚οΈ ν”„λ΅μ νΈ κ³µν†µ μ ν‹Έλ¦¬ν‹° (4)"
description: ""
date: "2024-08-05"
---

import Callout from "@/components/Callout.astro";

---

## β™οΈ web config

![](https://velog.velcdn.com/images/leemiyeonn/post/9461a0a6-971a-4280-8119-ab87d3bc0861/image.png)

### π¤”β”

#### μ¤‘μ•™ μ§‘μ¤‘μ‹ μ„¤μ •:

μ›Ή κ΄€λ ¨ μ„¤μ •(Interceptor, Resolver λ“±)μ„ ν• κ³³μ—μ„ κ΄€λ¦¬ν•μ—¬ μ μ§€λ³΄μμ„±μ„ λ†’μ…λ‹λ‹¤.
μ• ν”λ¦¬μΌ€μ΄μ…μ μ „λ°μ μΈ μ›Ή λ™μ‘μ„ μ‰½κ² νμ•…ν•κ³  μμ •ν•  μ μμµλ‹λ‹¤.

#### λ³΄μ• κ°•ν™”:

Interceptorλ¥Ό ν†µν•΄ λ€λ¶€λ¶„μ κ²½λ΅μ— μΈμ¦μ„ μ μ©ν•λ©΄μ„, ν•„μ”ν• κ²½λ΅λ” μ μ™Έν•  μ μμµλ‹λ‹¤.
μ„Έμ… κ΄€λ¦¬, CSRF λ°©μ§€ λ“± λ‹¤μ–‘ν• λ³΄μ• κΈ°λ¥μ„ μΌκ΄„μ μΌλ΅ μ μ©ν•  μ μμµλ‹λ‹¤.

#### μ μ—°μ„±κ³Ό ν™•μ¥μ„±:

Interceptorμ κ²½λ΅ ν¨ν„΄μ„ μ‰½κ² μ¶”κ°€ν•κ±°λ‚ μμ •ν•  μ μμ–΄, μ• ν”λ¦¬μΌ€μ΄μ…μ ν™•μ¥μ„±μ„ μ κ³µν•©λ‹λ‹¤.
Resolverλ¥Ό ν†µν•΄ μ»¨νΈλ΅¤λ¬ λ©”μ„λ“μ νλΌλ―Έν„° μ²λ¦¬λ¥Ό μ»¤μ¤ν„°λ§μ΄μ¦ν•  μ μμ–΄ μ μ—°ν• λ°μ΄ν„° λ°”μΈλ”©μ΄ κ°€λ¥ν•©λ‹λ‹¤.

#### λΉ„μ¦λ‹μ¤ λ΅μ§ λ¶„λ¦¬:

Interceptorμ™€ Resolverλ¥Ό μ‚¬μ©ν•μ—¬ cross-cutting concernsλ¥Ό λ¶„λ¦¬ν•¨μΌλ΅μ¨,
μ»¨νΈλ΅¤λ¬λ” μμν• λΉ„μ¦λ‹μ¤ λ΅μ§μ— μ§‘μ¤‘ν•  μ μμµλ‹λ‹¤.

### π¤”β“

#### Interceptor:

μ”μ²­μ„ μ»¨νΈλ΅¤λ¬μ— μ „λ‹¬ν•κΈ° μ „κ³Ό ν›„μ— μ‘λ™ν•©λ‹λ‹¤.
μ£Όλ΅ μΈμ¦, λ΅κΉ…, νΈλμ­μ… κ΄€λ¦¬ λ“± κ³µν†µμ μΈ μ‘μ—…μ„ μ²λ¦¬ν•©λ‹λ‹¤.
μ”μ²­μ„ κ°€λ΅μ±„κ³  ν•„μ”ν• κ²½μ° μ”μ²­μ„ κ±°λ¶€ν•  μ μμµλ‹λ‹¤.
HandlerInterceptor μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ—¬ λ§λ“­λ‹λ‹¤.

#### Resolver:

μ£Όλ΅ HandlerMethodArgumentResolverλ¥Ό μλ―Έν•©λ‹λ‹¤.
μ»¨νΈλ΅¤λ¬ λ©”μ„λ“μ νλΌλ―Έν„°λ¥Ό λ¶„μ„ν•κ³  μ μ ν• κ°’μ„ λ°”μΈλ”©ν•©λ‹λ‹¤.
μ”μ²­ νλΌλ―Έν„°, ν—¤λ”, μΏ ν‚¤ λ“±μ—μ„ λ°μ΄ν„°λ¥Ό μ¶”μ¶ν•μ—¬ μ»¨νΈλ΅¤λ¬ λ©”μ„λ“μ— μ „λ‹¬ν•©λ‹λ‹¤.
μ»¤μ¤ν…€ μ–΄λ…Έν…μ΄μ…κ³Ό ν•¨κ» μ‚¬μ©ν•μ—¬ λ³µμ΅ν• κ°μ²΄λ¥Ό μλ™μΌλ΅ μƒμ„±ν•  μ μμµλ‹λ‹¤.

#### μ£Όμ” μ°¨μ΄μ 

μ‘λ™ μ‹μ :
Interceptorλ” μ”μ²­ μ²λ¦¬ μ „ν›„μ—, Resolverλ” μ»¨νΈλ΅¤λ¬ λ©”μ„λ“ νΈμ¶ μ§μ „μ— μ‘λ™ν•©λ‹λ‹¤.
λ©μ :
Interceptorλ” μ „λ°μ μΈ μ”μ²­ μ²λ¦¬ νλ¦„μ„ μ μ–΄ν•κ³ , Resolverλ” λ©”μ„λ“ νλΌλ―Έν„° λ°”μΈλ”©μ— μ§‘μ¤‘ν•©λ‹λ‹¤.
λ²”μ„:
Interceptorλ” μ „μ²΄ μ”μ²­μ— λ€ν•΄ μ‘λ™ν•κ³ , Resolverλ” νΉμ • λ©”μ„λ“ νλΌλ―Έν„°μ— λ€ν•΄ μ‘λ™ν•©λ‹λ‹¤.

## β™οΈ authorization interceptor

![](https://velog.velcdn.com/images/leemiyeonn/post/72c695b4-cba2-461b-b4d3-6c0c56b71e2a/image.png)

### π¤”β”

#### CORS μ‚¬μ „ μ”μ²­(Preflight) μ²λ¦¬:

OPTIONS λ©”μ„λ“ μ”μ²­μ€ μΈμ¦ μ—†μ΄ ν†µκ³Όμ‹ν‚µλ‹λ‹¤.
μ΄λ” λΈλΌμ°μ €μ CORS μ •μ±…μ„ μ¤€μν•κΈ° μ„ν• κ²ƒμ…λ‹λ‹¤.

#### μ •μ  λ¦¬μ†μ¤ μ”μ²­ μ²λ¦¬:

ResourceHttpRequestHandlerμ— μν•΄ μ²λ¦¬λλ” μ”μ²­ (μ£Όλ΅ μ •μ  λ¦¬μ†μ¤)μ€ μΈμ¦ μ—†μ΄ ν†µκ³Όμ‹ν‚µλ‹λ‹¤.
μ΄λ” CSS, JavaScript, μ΄λ―Έμ§€ νμΌ λ“±μ— λ€ν• μ ‘κ·Όμ„ ν—μ©ν•κΈ° μ„ν•¨μ…λ‹λ‹¤.

#### μ”μ²­ URI λ΅κΉ…:

λ¨λ“  μ”μ²­μ URIλ¥Ό λ΅κ·Έλ΅ κΈ°λ΅ν•μ—¬ μ–΄λ–¤ μ—”λ“ν¬μΈνΈκ°€ νΈμ¶λμ—λ”μ§€ μ¶”μ ν•  μ μμµλ‹λ‹¤.

## β™οΈ user session resolver

![](https://velog.velcdn.com/images/leemiyeonn/post/83240914-fc66-4f16-a476-83f1f9781a62/image.png)

### π¤”β”

#### νλΌλ―Έν„° μ§€μ› ν™•μΈ (supportsParameter λ©”μ„λ“)

@UserSession μ–΄λ…Έν…μ΄μ…μ΄ μκ³ , νλΌλ―Έν„° νƒ€μ…μ΄ User ν΄λμ¤μΈ κ²½μ°μ—λ§ λ™μ‘ν•©λ‹λ‹¤.
μ΄λ¥Ό ν†µν•΄ νΉμ • μ΅°κ±΄μ„ λ§μ΅±ν•λ” νλΌλ―Έν„°μ— λ€ν•΄μ„λ§ resolverκ°€ μ‘λ™ν•λ„λ΅ μ ν•ν•©λ‹λ‹¤.

#### μ‚¬μ©μ μ •λ³΄ ν•΄κ²° (resolveArgument λ©”μ„λ“)

ν„μ¬ μ”μ²­μ μ»¨ν…μ¤νΈμ—μ„ userIdλ¥Ό κ°€μ Έμµλ‹λ‹¤.
UserServiceλ¥Ό ν†µν•΄ λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μ‚¬μ©μ μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤.
μ΅°νλ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ User κ°μ²΄λ¥Ό μƒμ„±ν•μ—¬ λ°ν™ν•©λ‹λ‹¤.

---
